# 3.11.6 Delete Article

## 1. Use Case Description

| Field              | Description                                                                                                             |
| ------------------ | ----------------------------------------------------------------------------------------------------------------------- |
| **Name**           | Delete Article                                                                                                          |
| **Description**    | This use case allows the Admin to delete an existing article from the system.                                           |
| **Actor**          | Admin, Super Admin                                                                                                      |
| **Trigger**        | When the Admin confirms deletion via `DELETE /articles/:id`.                                                            |
| **Pre-condition**  | • Admin's device must be connected to the internet.<br>• Admin is signed in with admin privileges.<br>• Article exists. |
| **Post-condition** | The article and its relations are removed from the database.                                                            |

## 2. Sequence Flow (MVC)

```plantuml
@startuml
autonumber
skinparam sequenceMessageAlign center

actor "Admin" as User
boundary "ArticleManagementPage" as View
control "ArticleController" as Controller
control "ArticleService" as Service
entity "ArticleRepository" as Repo

User -> View: Click Delete Article
View -> View: Show Confirmation Dialog
note right: BR-01
View -> Controller: DELETE /articles/:id
activate Controller

Controller -> Service: remove(id)
activate Service

Service -> Repo: findById(id)
activate Repo
Repo --> Service: ArticleEntity (or null)
deactivate Repo

alt Article Found
    Service -> Repo: delete(id)
    activate Repo
    Repo --> Service: Deleted
    deactivate Repo

    Service --> Controller: SuccessResponse
    Controller --> View: 200 OK (Deleted)
    View --> User: Show Success Message
else Article Not Found
    Service --> Controller: Throw NotFoundException
    Controller --> View: 404 Not Found
    View --> User: Display Error Message
end

deactivate Service
deactivate Controller
@enduml
```

## 3. Activities Flow (Swimlanes)

```plantuml
@startuml
|Admin|
start
:(1) Select Article to Delete;
:(2) Confirm Deletion;
note right: BR-01

|ArticleController|
:(3) Authenticate & Authorize;
note right: BR-02

|ArticleService|
:(4) Verify Article Exists;

if (Article Found?) then (No)
    :(5.1) Return 404 Not Found;
    |Admin|
    :(5.2) View Error Message;
    stop
endif

|ArticleRepository|
:(6) Delete Article Relations;
note right: BR-03
:(7) Delete Article Record;

|ArticleService|
:(8) Return Success Response;

|Admin|
:(9) View Updated Article List;
stop
@enduml
```

## 4. Business Rules

| Activity | BR Code   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 
| :------- | :-------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | 
| **(1)**  | **BR-01** | **Displaying Rules (Confirmation):**<br>❖ The system displays a confirmation modal, `Display_Modal('ConfirmationBox')`. (Refer to “ConfirmationBox” view in “View Description” file).<br>❖ It presents **MSG 11** ("Delete article [Title]? Action cannot be undone.") to the Admin.<br>❖ The system awaits Admin confirmation before proceeding with the irreversible deletion.                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **(3)**  | **BR-02** | **Authorization Rules (Back-end):**<br>❖ The system checks the authenticated user's role via `ArticleService.remove()` to ensure they have the necessary permissions.<br>❖ If the input is not valid:<br>⮚ If the user's role is not 'admin' or 'super_admin', the system returns a 403 Forbidden status.<br>⮚ The system displays **MSG 5** (Forbidden) on the View.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **(6)**  | **BR-03** | **Processing Rules (Cascade Delete):**<br>❖ The system leverages a database cascade delete mechanism.<br>❖ Upon deletion of the main article, related entries in the “ARTICLE_RELATION” table are automatically removed via a Foreign Key constraint (ON DELETE CASCADE).<br>❖ This ensures referential integrity and prevents orphaned records.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **(7)**  | **BR-04** | **Storing Rules (Back-end):**<br>❖ The system removes the record from the “ARTICLE” table by calling `ArticleService.remove(id)`.<br>❖ This is a hard delete, meaning the record is permanently removed from the database.<br>❖ System moves to step (9) and displays successful notification (Refer to **MSG 7**).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **(9)**  | **BR-05** | **Displaying Rules (Success Confirmation):**<br>❖ The system redirects the admin to the Article List Page by calling `Redirect('ArticleListPage')`.<br>❖ A success toast notification confirms that the article has been deleted.<br>❖ The system refreshes the article list to remove the deleted entry.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
