# 3.11.1 List All Articles

## 1. Use Case Description

| Field              | Description                                                                                            |
| ------------------ | ------------------------------------------------------------------------------------------------------ |
| **Name**           | List All Articles                                                                                      |
| **Description**    | This use case allows any user to view a list of articles including news, auction notices, and reports. |
| **Actor**          | All (Public - Guest, Bidder, Auctioneer, Admin)                                                        |
| **Trigger**        | When the user navigates to the articles/news page or requests `GET /articles`.                         |
| **Pre-condition**  | • User's device must be connected to the internet.                                                     |
| **Post-condition** | The list of articles is retrieved and displayed to the user.                                           |

## 2. Sequence Flow (MVC)

```plantuml
@startuml
autonumber
skinparam sequenceMessageAlign center

actor "User" as User
boundary "ArticlesPage" as View
control "ArticleController" as Controller
control "ArticleService" as Service
entity "ArticleRepository" as Repo

User -> View: Navigate to Articles Page
View -> Controller: GET /articles?type=xxx&page=1
activate Controller

Controller -> Service: findAll(query)
activate Service

Service -> Repo: findAll(filters, pagination)
activate Repo
Repo --> Service: Article[]
deactivate Repo

Service --> Controller: ArticleListDto
Controller --> View: 200 OK (Articles)
View --> User: Display Article List

deactivate Service
deactivate Controller
@enduml
```

## 3. Activities Flow (Swimlanes)

```plantuml
@startuml
|User|
start
:(1) Navigate to Articles Page;
:(2) Apply Filters (Optional);

|ArticleController|
:(3) Receive Request with Query;

|ArticleService|
:(4) Parse Query Parameters;
note right: BR-01

|ArticleRepository|
:(5) Query Articles from Database;
note right: BR-02

|ArticleService|
:(6) Format Response with Pagination;
note right: BR-03

:(7) Return Article List;

|User|
:(8) View Article Summaries;
:(9) Click Article for Details;
stop
@enduml
```

## 4. Business Rules

| Activity | BR Code   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| :------- | :-------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **(1)**  | **BR-01** | **Displaying Rules:**<br>❖ The system renders the “ArticlesPage” screen using `Display_View()`.<br>❖ It displays a search/filter bar allowing filtering by Type and Keyword search.<br>❖ It renders a grid or list of Article Cards representing the content.<br>❖ The system shows a loading skeleton while the data is being fetched.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **(2)**  | **BR-02** | **Filtering Rules:**<br>❖ The system uses `Frontend_Filter(query)` to handle user input.<br>❖ It supports filtering by the [type] field with values: `news`, `auction_notice`, `auction_report`, and `legal_document`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **(5)**  | **BR-03** | **Querying Rules:**<br>❖ The system calls `ArticleService.findAll(query)` to retrieve the data.<br>❖ It invokes `ArticleRepository.findAll()`, applying a WHERE clause for `{ type: query.type }` and ordering by `{ createdAt: 'desc' }`.<br>❖ The query fetches specific fields: [id], [title], [description], [image], [author], and [createdAt].                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **(6)**  | **BR-04** | **Processing Rules (Pagination):**<br>❖ The system implements `Pagination_Logic(page, limit)` to manage large datasets.<br>❖ It sets a default limit of 10 items per page.<br>❖ It calculates the skip value as `(page - 1) * limit`.<br>❖ It returns a response object containing: `{ data: Article[], meta: { total, page, lastPage } }`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **(8)**  | **BR-05** | **Displaying Rules (Item):**<br>❖ The system renders each item using the `Display_Component('ArticleCard', article)` method.<br>❖ Each card displays the article's thumbnail image.<br>❖ It shows the title, truncating it if it exceeds 2 lines.<br>❖ It displays the description, truncating it to a maximum of 200 characters.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
