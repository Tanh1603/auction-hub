# 3.3.2 Get Auction Details

## 1. Use Case Description

| Field              | Description                                                                                        |
| ------------------ | -------------------------------------------------------------------------------------------------- |
| **Name**           | Get Auction Details                                                                                |
| **Description**    | This use case allows the User to search Auction information in the system based on input keywords. |
| **Actor**          | User                                                                                               |
| **Trigger**        | When User clicks on an Auction item in the AuctionListPage datagrid.                               |
| **Pre-condition**  | • User's device must be connected to the internet.<br>• User is on the AuctionListPage.            |
| **Post-condition** | The Auction details will be displayed on the AuctionDetailPage screen.                             |

## 2. Sequence Flow (MVC)

```plantuml
@startuml
autonumber
skinparam sequenceMessageAlign center

actor "User" as User
boundary "AuctionDetailPage" as View
control "AuctionController" as Controller
control "AuctionService" as Service
entity "AuctionRepository" as Repo

User -> View: Select specific auction
View -> Controller: GET /auctions/:id
activate Controller

Controller -> Service: findOne(auctionId)
activate Service

Service -> Repo: findUnique({ where: { id: auctionId } })
activate Repo
Repo --> Service: AuctionEntity (or null)
deactivate Repo

alt Auction Not Found
    Service --> Controller: Throw NotFoundException
    Controller --> View: 404 Not Found
    View --> User: Display Error Message
else Auction Found
    Service --> Controller: AuctionDetailsDto
    deactivate Service
    Controller --> View: 200 OK (JSON)
    View --> User: Display Auction Details Page
end

deactivate Controller
@enduml
```

## 3. Activities Flow (Swimlanes)

```plantuml
@startuml
|User|
start
:(1) Request Details for Specific Auction (ID);

|AuctionService|
:(2) Receive Request;
:(3) Extract Auction ID from Path;
:(4) Query Database for Auction Details;

|AuctionRepository|
:(5) Retrieve Auction Record by ID;

if (Auction Found?) then (No)
    |AuctionService|
    :(6.1) Return 404 Not Found;
    note right: BR-02
    |User|
    :(6.2) View Error Message;
    stop
else (Yes)
    |AuctionService|
    :(7) Format Auction Details Data;
    note right: BR-03
    :(8) Return JSON Response;
endif

|User|
:(9) View Full Auction Details;
stop
@enduml
```

## 4. Business Rules

| Activity  | BR Code   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| :-------- | :-------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **(1)**   | **BR-01** | **Querying Rules:**<br>❖ The system calls `AuctionService.findOne(id)` to retrieve detailed auction information.<br>❖ It invokes `AuctionRepository.findUnique({ where: { id } })` to query the “AUCTION” table.<br>❖ The query includes relations such as [propertyOwner] and [auctionCosts] to fetch comprehensive data.                                                                                                                                 |
| **(6.1)** | **BR-02** | **Validation Rules (Back-end):**<br>❖ The system performs a backend check for the auction’s existence.<br>❖ If the input is not valid:<br>⮚ If the auction ID is not found, the system returns a 404 Not Found error.<br>⮚ The system displays **MSG 11** (Auction Not Found) on the View.                                                                                                                                                                  |
| **(9)**   | **BR-03** | **Displaying Rules:**<br>❖ The system displays an “AuctionDetailPage” screen. (Refer to “AuctionDetailPage” view in “View Description” file).<br>❖ The screen renders content organized into tabs such as [Overview], [Timeline], [Documents], and [Location].<br>❖ The auction’s [Status] is displayed with color coding for quick visual identification.<br>❖ An [ImageGallery] component is used to showcase associated media.                                                                                                                                                                                           |
